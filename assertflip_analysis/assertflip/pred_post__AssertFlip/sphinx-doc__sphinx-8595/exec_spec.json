{"instance_id": "sphinx-doc__sphinx-8595", "repo": "sphinx-doc/sphinx", "version": "3.5", "environment_setup_commit": "4f8cb861e3b29186b38248fe81e4944fd987fcce", "patch_list": ["diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1074,7 +1074,7 @@ def get_module_members(self) -> Dict[str, ObjectMember]:\n     def get_object_members(self, want_all: bool) -> Tuple[bool, ObjectMembers]:\n         members = self.get_module_members()\n         if want_all:\n-            if not self.__all__:\n+            if self.__all__ is None:\n                 # for implicit module members, check __module__ to avoid\n                 # documenting imported objects\n                 return True, list(members.values())\n", "diff --git a/dev/null b/tests/test_coverup_sphinx-doc__sphinx-8595.py\nnew file mode 100644\nindex e69de29..1ae6518 100644\n--- /dev/null\n+++ b/tests/test_coverup_sphinx-doc__sphinx-8595.py\n@@ -0,0 +1,76 @@\n+import os\n+import pytest\n+from sphinx.application import Sphinx\n+\n+@pytest.fixture\n+def setup_sphinx_environment(tmp_path):\n+    # Create a temporary directory for the Sphinx project\n+    docs_dir = tmp_path / \"docs\"\n+    docs_dir.mkdir()\n+\n+    # Create a conf.py file\n+    conf_py = docs_dir / \"conf.py\"\n+    conf_py.write_text(\"\"\"\n+project = 'Example Project'\n+extensions = ['sphinx.ext.autodoc']\n+    \"\"\")\n+\n+    # Create an example.py module with an empty __all__\n+    example_py = docs_dir / \"example.py\"\n+    example_py.write_text(\"\"\"\n+__all__ = []\n+\n+def foo():\n+    \\\"\\\"\\\"docstring\\\"\\\"\\\"\n+\n+def bar():\n+    \\\"\\\"\\\"docstring\\\"\\\"\\\"\n+\n+def baz():\n+    \\\"\\\"\\\"docstring\\\"\\\"\\\"\n+    \"\"\")\n+\n+    # Create an index.rst file\n+    index_rst = docs_dir / \"index.rst\"\n+    index_rst.write_text(\"\"\"\n+.. automodule:: example\n+   :members:\n+    \"\"\")\n+\n+    return docs_dir\n+\n+def test_empty_all_attribute_exposes_bug(setup_sphinx_environment):\n+    docs_dir = setup_sphinx_environment\n+\n+    # Run the Sphinx build process\n+    app = Sphinx(\n+        srcdir=str(docs_dir),\n+        confdir=str(docs_dir),\n+        outdir=str(docs_dir / \"_build\"),\n+        doctreedir=str(docs_dir / \"_doctrees\"),\n+        buildername=\"html\",\n+    )\n+    app.build()\n+\n+    # Read the output HTML file\n+    output_html = docs_dir / \"_build\" / \"index.html\"\n+    output_content = output_html.read_text()\n+\n+    # Assert that no members are documented, which is the correct behavior\n+    # We expect no members to be documented since __all__ is empty\n+    assert not any(member in output_content for member in [\"foo\", \"bar\", \"baz\"])\n+\n+    # Cleanup: Remove the generated files to avoid state pollution\n+    for item in docs_dir.iterdir():\n+        if item.is_dir():\n+            for sub_item in item.iterdir():\n+                if sub_item.is_dir():\n+                    for sub_sub_item in sub_item.iterdir():\n+                        sub_sub_item.unlink()\n+                    sub_item.rmdir()\n+                else:\n+                    sub_item.unlink()\n+            item.rmdir()\n+        else:\n+            item.unlink()\n+\n"], "arch": "x86_64", "base_commit": "b19bce971e82f2497d67fdacdeca8db08ae0ba56", "test_directives": ["tests/test_coverup_sphinx-doc__sphinx-8595.py"], "coverage_files": ["sphinx/ext/autodoc/__init__.py"], "env_name": "testbed", "run_id": "assertflip", "patch_id": "pred_post__AssertFlip", "timeout": 1800, "rm_image": false, "force_rebuild": false, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.9", "pip_packages": ["tox==4.16.0", "tox-current-env==0.0.11"], "install": "python -m pip install -e .[test]", "pre_install": ["sed -i 's/pytest/pytest -rA/' tox.ini", "sed -i 's/Jinja2>=2.3/Jinja2<3.0/' setup.py", "sed -i 's/sphinxcontrib-applehelp/sphinxcontrib-applehelp<=1.0.7/' setup.py", "sed -i 's/sphinxcontrib-devhelp/sphinxcontrib-devhelp<=1.0.5/' setup.py", "sed -i 's/sphinxcontrib-qthelp/sphinxcontrib-qthelp<=1.0.6/' setup.py", "sed -i 's/alabaster>=0.7,<0.8/alabaster>=0.7,<0.7.12/' setup.py", "sed -i \"s/'packaging',/'packaging', 'markupsafe<=2.0.1',/\" setup.py", "sed -i 's/sphinxcontrib-htmlhelp/sphinxcontrib-htmlhelp<=2.0.4/' setup.py", "sed -i 's/sphinxcontrib-serializinghtml/sphinxcontrib-serializinghtml<=1.1.9/' setup.py"]}, "cache_level": "instance", "test_command": "python3 /root/trace.py --timing --trace --count -C coverage.cover --include-pattern '/testbed/(sphinx/ext/autodoc/__init__\\.py)' -m tox -epy39 -v -- tests/test_coverup_sphinx-doc__sphinx-8595.py", "req_install_commands": ["conda create -n testbed python=3.9  -y"]}